# Spaces.im Backup Tool

Веб-приложение для резервного копирования файлов с spaces.im

## Возможности

### Реализовано

- ✅ Авторизация через cookies (Netscape Cookie File)
- ✅ Автоматическое определение разделов пользователя (Фотографии, Музыка, Видео, Файлы)
- ✅ Выбор разделов для резервного копирования
- ✅ Рекурсивное сканирование папок и подпапок
- ✅ Парсинг файлов из всех разделов (фотографии, музыка, файлы)
- ✅ Обработка пагинации при сканировании
- ✅ Пропуск папок с паролем
- ✅ Извлечение ссылок на скачивание со страниц файлов (если прямой ссылки нет)
- ✅ Два режима сохранения:
  - Структура папок (сохраняет иерархию)
  - Все файлы в одну папку (плоская структура)
- ✅ Сохранение файлов напрямую через File System Access API
- ✅ Прогресс скачивания с отображением скорости
- ✅ Прогресс по количеству файлов и размеру
- ✅ Список файлов с пагинацией
- ✅ Повторная попытка скачивания для файлов с ошибками
- ✅ Сохранение файлов сразу после скачивания (не ждет завершения всех)
- ✅ Сохранение cookies и данных пользователя в localStorage
- ✅ Сворачиваемая панель авторизации
- ✅ Кнопка сброса результатов сканирования

### Не реализовано

- ❌ Скачивание видео
- ❌ Возобновление прерванного скачивания
- ❌ Проверка целостности скачанных файлов

## Использование

### Установка

```bash
npm install
```

### Запуск
``` bash
npm start
```

3. Откройте браузер по адресу `http://localhost:5173`

### Как использовать

1. **Авторизация:**
   - Скопируйте cookie значение sid
   - Вставьте в поле "Cookies"
   - Нажмите "Войти"
   - Приложение автоматически определит ваши разделы

2. **Выбор разделов:**
   - Выберите разделы для резервного копирования (Фотографии, Музыка, Видео, Файлы)
   - Можно выбрать несколько разделов

3. **Сканирование:**
   - Нажмите "Сканировать файлы"
   - Дождитесь завершения сканирования
   - Просмотрите список найденных файлов

4. **Сохранение:**
   - Выберите режим сохранения (Структура папок или Все файлы в одну папку)
   - Нажмите "Сохранить"
   - Выберите папку для сохранения
   - Дождитесь завершения скачивания

5. **Повтор при ошибках:**
   - Если файл не скачался, нажмите кнопку "Повторить" рядом с файлом
   - Файл будет скачан и сохранен отдельно

## Технологии

- React + TypeScript
- Vite
- Tailwind CSS
- Cheerio (парсинг HTML)
- Express.js (прокси-сервер)
- File System Access API

## Структура проекта

```
backup-app/
├── src/
│   ├── components/     # React компоненты
│   ├── utils/         # Вспомогательные функции
│   ├── types/         # TypeScript типы
│   └── App.tsx        # Главный компонент
├── server.js          # Прокси-сервер для обхода CORS
└── package.json
```

## Примечания

- Cookies сохраняются в localStorage браузера
- Для работы требуется современный браузер с поддержкой File System Access API (Chrome, Edge)
- Прокси-сервер необходим для обхода CORS ограничений
- Файлы сохраняются напрямую в выбранную папку без архивации

